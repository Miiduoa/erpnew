<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ERP 刷題練習網站</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
        }
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="root">
        <div class="loading">
            <div class="spinner"></div>
            <h2 style="margin-top: 20px;">載入ERP題庫中...</h2>
            <p>首次載入可能需要幾秒鐘</p>
        </div>
    </div>

    <script>
        // 不使用 Babel，直接用原生 JavaScript 和 React
        
        // 題庫數據存儲
        let QUESTIONS_DATA = [];
        
        // 載入題庫數據的函數
        function loadQuestionData() {
            // 這裡放入完整的452題數據，但是分批載入
            const questionsRaw = [
                [1,1,"ERP 系統最新的主流趨勢是採用下列哪一種基本技術架構","D","集中式架構","分散式架構","同儕計算架構","多層式(Multi-tier)主從架構。"],
                [1,2,"ERP 系統能即時整合各流程資料的原因為","A","各流程資料儲存於同一資料庫中","快速的電腦運算","電子商務的盛行","政府鼓勵。"],
                [1,3,"對 ERP 系統而言 ，下列敘述何者為非","A","ERP 強調的是資料的整合，而即時性並不重要","ERP 系統採主從式(Client-Server)架構","ERP 系統為企業 e 化核心","ERP 乃是一財務會計導向的資訊系統。"],
                [1,4,"以下何種模組所負責的業務部份較不屬於 ERP 的範籌","C","倉儲管理","財務模組","製造現場控制(SFC)","銷售/配送模組。"],
                [1,5,"一個能夠整合企業所有經營管理的資訊系統應該具備有 (1) 提供整合且即時的資訊 (2) 支援企 業運作及決策制定 (3) 系統之間能夠共享資訊 (4) 提升產品設計效率與績效 (5) 能夠累積眾多的 備份資料與密碼金鑰","A","(1)(2)(3)","(1)(2)(4)","(1)(3)(5)","(2)(4)(5)。"],
                // 為了演示，這裡只放前5題，你可以添加完整的452題
                // ... 其他447題
            ];
            
            // 轉換為標準格式
            return questionsRaw.map(item => ({
                chapter: item[0],
                number: item[1], 
                question: item[2],
                answer: item[3],
                optionA: item[4],
                optionB: item[5],
                optionC: item[6],
                optionD: item[7]
            }));
        }

        // 主要應用組件
        function ERPQuizApp() {
            const [currentQuestionIndex, setCurrentQuestionIndex] = React.useState(0);
            const [userAnswers, setUserAnswers] = React.useState({});
            const [showResult, setShowResult] = React.useState(false);
            const [isLoaded, setIsLoaded] = React.useState(false);

            // 載入數據
            React.useEffect(() => {
                setTimeout(() => {
                    try {
                        QUESTIONS_DATA = loadQuestionData();
                        setIsLoaded(true);
                        console.log('題庫載入完成，共', QUESTIONS_DATA.length, '題');
                    } catch (error) {
                        console.error('載入題庫失敗：', error);
                        document.getElementById('root').innerHTML = `
                            <div style="padding: 20px; text-align: center; color: red;">
                                <h1>載入失敗</h1>
                                <p>請重新整理頁面或聯繫技術支援</p>
                            </div>
                        `;
                    }
                }, 100);
            }, []);

            if (!isLoaded) {
                return React.createElement('div', {
                    className: 'loading'
                }, [
                    React.createElement('div', { key: 'spinner', className: 'spinner' }),
                    React.createElement('h2', { key: 'title', style: { marginTop: '20px' } }, '載入ERP題庫中...'),
                    React.createElement('p', { key: 'desc' }, '首次載入可能需要幾秒鐘')
                ]);
            }

            const questions = QUESTIONS_DATA;
            const currentQuestion = questions[currentQuestionIndex];
            const totalQuestions = questions.length;
            const answeredCount = Object.keys(userAnswers).length;

            const handleAnswerSelect = (selectedAnswer) => {
                const questionId = currentQuestion.number;
                setUserAnswers(prev => ({
                    ...prev,
                    [questionId]: selectedAnswer
                }));
                setShowResult(true);
            };

            const goToNextQuestion = () => {
                if (currentQuestionIndex < totalQuestions - 1) {
                    setCurrentQuestionIndex(prev => prev + 1);
                    setShowResult(false);
                }
            };

            const goToPreviousQuestion = () => {
                if (currentQuestionIndex > 0) {
                    setCurrentQuestionIndex(prev => prev - 1);
                    setShowResult(false);
                }
            };

            const resetQuiz = () => {
                setUserAnswers({});
                setCurrentQuestionIndex(0);
                setShowResult(false);
            };

            const getScorePercentage = () => {
                if (answeredCount === 0) return 0;
                let correctCount = 0;
                questions.forEach(q => {
                    if (userAnswers[q.number] === q.answer) {
                        correctCount++;
                    }
                });
                return Math.round((correctCount / answeredCount) * 100);
            };

            return React.createElement('div', {
                className: 'min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100'
            }, [
                // 頂部狀態欄
                React.createElement('div', {
                    key: 'header',
                    className: 'bg-white shadow-sm border-b'
                }, React.createElement('div', {
                    className: 'max-w-4xl mx-auto px-4 py-4'
                }, React.createElement('div', {
                    className: 'flex items-center justify-between flex-wrap gap-4'
                }, [
                    React.createElement('div', {
                        key: 'title',
                        className: 'flex items-center space-x-4'
                    }, [
                        React.createElement('h1', {
                            key: 'text',
                            className: 'text-xl font-bold text-gray-800'
                        }, 'ERP 刷題練習'),
                        React.createElement('span', {
                            key: 'badge',
                            className: 'text-sm text-green-600 bg-green-100 px-2 py-1 rounded'
                        }, `共 ${totalQuestions} 題`)
                    ]),
                    React.createElement('div', {
                        key: 'stats',
                        className: 'flex items-center space-x-6'
                    }, [
                        React.createElement('span', {
                            key: 'progress',
                            className: 'text-sm text-gray-600'
                        }, `第 ${currentQuestionIndex + 1} / ${totalQuestions} 題`),
                        React.createElement('span', {
                            key: 'score',
                            className: 'text-sm text-gray-600'
                        }, `已答: ${answeredCount} | 正確率: ${getScorePercentage()}%`),
                        React.createElement('button', {
                            key: 'reset',
                            onClick: resetQuiz,
                            className: 'px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded text-sm'
                        }, '重新開始')
                    ])
                ]))),

                // 進度條
                React.createElement('div', {
                    key: 'progress-bar',
                    className: 'max-w-4xl mx-auto px-4 py-2'
                }, React.createElement('div', {
                    className: 'w-full bg-gray-200 rounded-full h-2'
                }, React.createElement('div', {
                    className: 'bg-indigo-600 h-2 rounded-full transition-all duration-300',
                    style: { width: `${((currentQuestionIndex + 1) / totalQuestions) * 100}%` }
                }))),

                // 主要內容區域
                React.createElement('div', {
                    key: 'main',
                    className: 'max-w-4xl mx-auto px-4 py-8'
                }, React.createElement('div', {
                    className: 'bg-white rounded-xl shadow-lg p-8'
                }, [
                    // 題目
                    React.createElement('div', {
                        key: 'question',
                        className: 'mb-8'
                    }, [
                        React.createElement('div', {
                            key: 'badge',
                            className: 'mb-4'
                        }, React.createElement('span', {
                            className: 'bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm font-medium'
                        }, `第 ${currentQuestion.number} 題`)),
                        React.createElement('h2', {
                            key: 'text',
                            className: 'text-xl font-medium text-gray-800 leading-relaxed'
                        }, currentQuestion.question)
                    ]),

                    // 選項
                    React.createElement('div', {
                        key: 'options',
                        className: 'space-y-3 mb-8'
                    }, ['A', 'B', 'C', 'D'].map((option) => {
                        const optionText = currentQuestion[`option${option}`];
                        const isSelected = userAnswers[currentQuestion.number] === option;
                        const isCorrect = currentQuestion.answer === option;
                        const showAnswer = showResult && userAnswers[currentQuestion.number];
                        
                        let buttonClass = "w-full p-4 text-left border-2 rounded-lg transition-all duration-200 ";
                        
                        if (showAnswer) {
                            if (isCorrect) {
                                buttonClass += "border-green-500 bg-green-50 text-green-800";
                            } else if (isSelected && !isCorrect) {
                                buttonClass += "border-red-500 bg-red-50 text-red-800";
                            } else {
                                buttonClass += "border-gray-200 bg-gray-50 text-gray-600";
                            }
                        } else if (isSelected) {
                            buttonClass += "border-indigo-500 bg-indigo-50 text-indigo-800";
                        } else {
                            buttonClass += "border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 cursor-pointer";
                        }

                        return React.createElement('button', {
                            key: option,
                            onClick: () => !showResult && handleAnswerSelect(option),
                            disabled: showResult,
                            className: buttonClass
                        }, React.createElement('div', {
                            className: 'flex items-start space-x-3'
                        }, [
                            React.createElement('span', {
                                key: 'label',
                                className: `flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-sm font-medium ${
                                    showAnswer && isCorrect 
                                        ? 'bg-green-500 text-white' 
                                        : showAnswer && isSelected && !isCorrect
                                        ? 'bg-red-500 text-white'
                                        : isSelected 
                                        ? 'bg-indigo-500 text-white' 
                                        : 'bg-gray-300 text-gray-600'
                                }`
                            }, option),
                            React.createElement('span', {
                                key: 'text',
                                className: 'flex-1'
                            }, optionText)
                        ]));
                    })),

                    // 答案解析
                    showResult && React.createElement('div', {
                        key: 'explanation',
                        className: `p-4 rounded-lg mb-6 ${
                            userAnswers[currentQuestion.number] === currentQuestion.answer 
                                ? 'bg-green-50 border border-green-200' 
                                : 'bg-red-50 border border-red-200'
                        }`
                    }, [
                        React.createElement('p', {
                            key: 'status',
                            className: `font-medium mb-2 ${
                                userAnswers[currentQuestion.number] === currentQuestion.answer 
                                    ? 'text-green-800' 
                                    : 'text-red-800'
                            }`
                        }, userAnswers[currentQuestion.number] === currentQuestion.answer ? '✓ 回答正確！' : '✗ 回答錯誤'),
                        React.createElement('p', {
                            key: 'answer',
                            className: 'text-gray-700'
                        }, `正確答案：${currentQuestion.answer} - ${currentQuestion[`option${currentQuestion.answer}`]}`)
                    ]),

                    // 導航按鈕
                    React.createElement('div', {
                        key: 'navigation',
                        className: 'flex justify-between items-center'
                    }, [
                        React.createElement('button', {
                            key: 'prev',
                            onClick: goToPreviousQuestion,
                            disabled: currentQuestionIndex === 0,
                            className: 'px-4 py-2 bg-gray-100 hover:bg-gray-200 disabled:opacity-50 rounded-lg'
                        }, '◀ 上一題'),

                        React.createElement('div', {
                            key: 'info',
                            className: 'text-sm text-gray-500 text-center'
                        }, [
                            React.createElement('div', { key: 'current' }, `第 ${currentQuestionIndex + 1} 題，共 ${totalQuestions} 題`),
                            answeredCount > 0 && React.createElement('div', { 
                                key: 'stats',
                                className: 'mt-1'
                            }, `已答 ${answeredCount} 題，答對 ${Object.keys(userAnswers).filter(id => userAnswers[id] === questions.find(q => q.number == id)?.answer).length} 題`)
                        ]),

                        React.createElement('button', {
                            key: 'next',
                            onClick: goToNextQuestion,
                            disabled: currentQuestionIndex === totalQuestions - 1,
                            className: 'px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 text-white rounded-lg'
                        }, '下一題 ▶')
                    ])
                ]))
            ]);
        }

        // 等待 React 載入完成後渲染
        function initApp() {
            try {
                const root = ReactDOM.createRoot(document.getElementById('root'));
                root.render(React.createElement(ERPQuizApp));
                console.log('應用啟動成功！');
            } catch (error) {
                console.error('啟動失敗：', error);
                document.getElementById('root').innerHTML = `
                    <div style="padding: 20px; text-align: center; color: red;">
                        <h1>啟動失敗</h1>
                        <p>錯誤：${error.message}</p>
                        <p>請嘗試重新整理頁面</p>
                    </div>
                `;
            }
        }

        // 檢查 React 是否載入完成
        if (typeof React !== 'undefined' && typeof ReactDOM !== 'undefined') {
            initApp();
        } else {
            // 如果 React 還沒載入，等待一下
            setTimeout(initApp, 1000);
        }
    </script>
</body>
</html>